define(["require","exports","tslib","tslib","react","spectrum/modal/index","spectrum/button/index"],(function(e,t,o,n,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UtilityModal=t.disabledPrimaryButton=t.splitByUtilityModalProps=void 0,i=o.__importStar(i),t.splitByUtilityModalProps=function(e){var t=e.valid,o=e.setFocus,i=e.actionBlockRequest,a=e.actionUnblockRequest,r=e.actionDataReady,l=e.actionAccept,s=e.actionCancel,c=e.actionOpen,d=e.actionClose,u=e.displayCloseButton,y=e.className,m=e.bodyClassName,p=e.parentElement,v=e.onRequestClose,f=e.onReady,C=e.width,h=e.height,A=e.contentTagName,b=e.ariaLabel,R=e.open,q=e.overlayClassName,_=e.overlayClickClose,E=e.overflowY,k=e.overlayFixed,g=e.primaryAction,B=e.secondaryAction,P=e.title,F=e.link,N=e.variant,w=e.onPrimaryAction,x=e.onSecondaryAction,U=e.onLink,D=e.shouldRequestCloseOnActions;e.children;return{modal:{displayCloseButton:u,bodyClassName:m,className:y,parentElement:p,onRequestClose:v,onReady:f,width:C,height:h,contentTagName:A,ariaLabel:b,open:R,overlayClassName:q,overlayClickClose:_,overflowY:E,overlayFixed:k,primaryAction:g,secondaryAction:B,title:P,link:F,variant:N,onPrimaryAction:w,onSecondaryAction:x,onLink:U,shouldRequestCloseOnActions:D},modalBehavior:{valid:t,setFocus:o,actionBlockRequest:i,actionUnblockRequest:a,actionDataReady:r,actionAccept:l,actionCancel:s,actionOpen:c,actionClose:d},rest:n.__rest(e,["valid","setFocus","actionBlockRequest","actionUnblockRequest","actionDataReady","actionAccept","actionCancel","actionOpen","actionClose","displayCloseButton","className","bodyClassName","parentElement","onRequestClose","onReady","width","height","contentTagName","ariaLabel","open","overlayClassName","overlayClickClose","overflowY","overlayFixed","primaryAction","secondaryAction","title","link","variant","onPrimaryAction","onSecondaryAction","onLink","shouldRequestCloseOnActions","children"])}},t.disabledPrimaryButton=function(e,t,o){var a=e;if(""!==a&&!a)throw new Error("Primary element is not set on utility modal");var l=a;return a="string"==typeof a?function(e){var a={variant:"primary",onClick:e};return!1===t&&(a.disabled=!0),i.createElement("span",{ref:o||void 0},i.createElement(r.Button,n.__assign({},a),l))}:function(e){var n={ref:o};return!1===t&&(n.disabled=!0),i.cloneElement(l(e),n)}};var l=(function(e){function o(t){var o=e.call(this,t)||this;return o.setPrimaryActionElement=function(e){return o.primaryActionElement=e},o.firstFocusableElement=function(){return o.primaryActionElement.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0]},o.modalBody=function(){var e=o.props.bodyClassName,t=void 0===e?"mc-modal-body":e;return document.querySelector("."+t)},o.modalOverlay=function(){return document.querySelector(".rn-modal-overlay")},o.setFocus=function(){return n.__awaiter(o,void 0,void 0,(function(){var e=this;return n.__generator(this,(function(t){return setTimeout((function(){var t=e.props.valid,o=void 0===t||t,n=e.modalBody();if(n&&!n.contains(document.activeElement)){var i=n;if(o&&e.primaryActionElement){var a=e.firstFocusableElement();a&&(i=a)}i.focus()}}),0),[2]}))}))},o.accept=function(){var e=o.props,t=e.actionAccept,n=e.valid;(void 0===n||n)&&t()},o.onKeyDown=function(e){13===e.keyCode&&o.accept()},o.onRequestClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.props,i=n.actionCancel,a=n.onRequestClose;a&&a();var r=e.length>=1&&27===e[0].keyCode,l=e[0]&&e[0].target===o.modalOverlay();(r||l)&&i()},o.cloneElement=function(e,t){return e?"string"==typeof e?e:i.cloneElement(e,n.__assign(n.__assign({},t),{onKeyDown:o.onKeyDown})):null},t.setFocus&&t.setFocus(o.setFocus),o}return n.__extends(o,e),o.prototype.componentDidMount=function(){this.props.open&&this.setFocus()},o.prototype.componentDidUpdate=function(e){this.props.open&&!e.open&&this.setFocus()},o.prototype.render=function(){var e=this,o=this.props,r=o.primaryAction,l=o.actionCancel,s=o.actionAccept,c=o.onPrimaryAction,d=o.onSecondaryAction,u=o.valid,y=void 0===u||u,m=t.splitByUtilityModalProps(this.props),p=m.modal,v=m.rest,f=t.disabledPrimaryButton(r,y,this.setPrimaryActionElement);return i.createElement(a.UtilityModal,n.__assign({},p,{primaryAction:f,onPrimaryAction:c||s,onSecondaryAction:d||l,onRequestClose:this.onRequestClose,onKeyPress:this.onKeyDown,overlayClassName:"rn-modal-overlay"}),i.Children.map(this.props.children,(function(t){return e.cloneElement(t,v)})))},o})(i.Component);t.UtilityModal=l}));
//# sourceMappingURL=utility_modal.amd.min.js-vflAbE9q3.map