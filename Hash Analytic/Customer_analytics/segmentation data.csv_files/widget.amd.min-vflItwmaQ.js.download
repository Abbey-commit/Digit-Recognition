define(["require","exports","tslib","tslib","lodash","prop-types","react","react-redux","rondo/index"],(function(e,t,r,o,n,i,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.widgetComponent=t.widget=void 0,n=r.__importStar(n),a=r.__importStar(a),t.widget=function(e,t,r){var p,u=r?r.context:void 0;return(p=(function(i){function p(o){var a=i.call(this,o)||this;return a.getChildContext=function(){return u?Object.keys(u).reduce((function(e,t){return e[t]=n.get(a.behaviorStore.getState(),u[t]),e}),{}):{}},a.createBehavior=c.markAround(a.id,"mounting")((function(){a.behaviorStore=new c.BehaviorStore({behavior:e,displayName:a._displayName,initialState:a.props?a.props.initialState:void 0,slice:a.props.slice,selector:a.props.selector,options:r,store:a.props.store||a.context&&a.context.store}),a.behaviorStore.create();var o=c.markAround(a.id,"stateToProps")((function(e){return a.behaviorStore.getStateWithSelectors(e)}));a.WidgetComp=s.connect(o,(function(e){return c.bindActionCreatorsRecursive(a.behaviorStore.actions,e)}),c.markAround(a.id,"props")((function(e,t,r){return n.merge({},e,t,r)})))(t)})),a.id=a._generateUniqueId(),c.markStart(a.id,"load"),a}return o.__extends(p,i),Object.defineProperty(p.prototype,"store",{get:function(){return this.behaviorStore.store},enumerable:!0,configurable:!0}),p.prototype._generateUniqueId=function(){return"WIDGET-"+(this._displayName?this._displayName+"-":"")+(this.props.slice?this.props.slice+"-":"")+Math.random().toString(36).substr(2,9)},Object.defineProperty(p.prototype,"_displayName",{get:function(){return this.constructor.displayName},enumerable:!0,configurable:!0}),p.prototype.UNSAFE_componentWillMount=function(){this.createBehavior()},p.prototype.componentDidMount=function(){c.markEnd(this.id,"load")},p.prototype.componentWillUnmount=function(){this.behaviorStore.behaviorWidget.unregister()},p.prototype.render=function(){var e=this.WidgetComp;return a.createElement(s.Provider,{store:this.behaviorStore.store},a.createElement(e,o.__assign({},this.props)))},p})(a.Component)).contextType=s.ReactReduxContext,p.childContextTypes=u?Object.keys(u).reduce((function(e,t){return e[t]=i.any,e}),{}):{},p},t.widgetComponent=function(e,r){return function(o){t.widget(e,o,r)}}}));
//# sourceMappingURL=widget.amd.min.js-vfllBWilP.map